# 更新日志 Changelog

## Unreleased

### 增加 Added

### 修改 Changed

### 修复 Fixed

### 优化 Refactored

### 移除 Removed

---

## 1.0.0 - 2020.06.18

### 增加 Added

- 删除水表位置同时删除其所有记录，节省数据表空间。

### 优化 Refactored

- 精简类名和方法名：

  - 去除统一但冗余的前缀 Water/water。

  - 各层方法名的名词改动。

    - 所有：List；某个/一个：One；分页 Page。

  - 各类方法名的动词改动。

    - 控制层：与 HTTP 请求类型对应。

      > get post put delete

    - 业务层：尽量不与持久层以及 SQL 语句相同。

      > retrieve add modify remove

    - 持久层：预定的，未作改动。

      > find save save delete

---

## 0.3.0 - 2020.06.15

### 增加 Added

- 增加分页返回 GET 请求的列表的功能。旧版本是一次性全部返回，现版本是根据前端请求的每页多少项，需要第几页来分页返回列表数据。同时前端注意响应内容的变化，原先是解析 data 对象中，现在是解析 data 中的 content 数组。

- 每种请求响应都在终端打印一条消息。

### 修改 Changed

- 数据库的日期时间字段改用长整型（bigint），实体层对应 Java 对象改用长整型（Long）类型。同时后端接收前端请求中的日期时间相关都是长整型。即从字符串型改成长整型的时间戳。

  > "2020-05-01 00:00:00" （北京时间，GMT+8:00，Asia/Shanghai）
  >
  > ↓↓↓
  >
  > 1588262400

- 前端请求 url 中名词采用复数形式。

### 优化 Refactored

- 优化整个工程中日期时间 Java 对象的类型。原先采用的是不推荐使用的 Date 类，现在采用的是 Java 8 中的 ZonedDateTime 类和 Instant 类，保证数据稳定和时区正确。

---

## 0.2.0 - 2020.05.29

### 增加 Added

- 定时遍历水表为每个水表生成一个随机记录。目前默认的是每分钟第 0 秒执行一次定时计划任务。

### 优化 Refactored

- Service 业务层从 Controller 控制层分离出来。

- 增加和更新记录的业务方法高度相似，合并到一个方法中。添加操作不需要提供主键，参数为 null，更新操作需要提供主键，来自前端请求中的参数。

- 各层引用对象不使用 Autowired 注解，改用构造方法。

---

## 0.1.0 - 2020.05.16

### 增加 Added

- 能够响应前端的获取 GET、增加 POST、更新 PUT、删除 DELETE 四种请求，返回需要的数据。
